% Define your main color
\definecolor{MainColor}{RGB}{155, 0, 20} % Example RGB color for MainColor


% Diamond itemize list
\setlist[itemize]{label=$\diamond$}


% List of figures path
\graphicspath{{figures/}}


% Change from "Listing 1" to "Codice 1"
\addto\captionsitalian{%
    \renewcommand{\lstlistingname}{Codice}
}


% Change from "Listings" to "Elenco dei codici"
\addto\captionsitalian{%
    \renewcommand{\lstlistlistingname}{Elenco dei codici}
}


% Create tree style for TikZ
\tikzset{
    treenode/.style = {shape=rectangle, rounded corners,
                       draw, align=center, 
                       top color=white, bottom color=blue!30},
    root/.style     = {treenode, font=\normalsize, bottom color=grey!50},
    env/.style      = {treenode, font=\small},
}


% Chapter formatting
\titleformat{\chapter}[block]%
    {\normalfont\scshape\HUGE}%
    {\hspace*{-70pt}\color{MainColor!75}\fontencoding{U}\fontfamily{eur}\fontseries{b}\fontsize{60}{80}\selectfont\thechapter\hspace{15pt}}{10pt}
    {}[\chapterdecoration]

% Chapter decoration style
\newcommand{\chapterdecoration}{%
    \begin{tikzpicture}[remember picture, overlay, shorten >= -10pt]
        \coordinate (aux1) at ([yshift=-15pt]current page.north east);
        \coordinate (aux2) at ([yshift=-410pt]current page.north east);
        \coordinate (aux3) at ([xshift=-4.5cm]current page.north east);
        \coordinate (aux4) at ([yshift=-150pt]current page.north east);

        \begin{scope}[MainColor!50,line width=12pt,rounded corners=12pt]
            \draw (aux1) -- coordinate (a) ++(225:5) -- ++(-45:5.1) coordinate (b);
            \draw[shorten <= -10pt] (aux3) -- (a) -- (aux1);
            \draw[opacity=0.6, MainColor, shorten <= -10pt] (b) -- ++(225:2.2) -- ++(-45:2.2);
        \end{scope}
        
        \draw[MainColor, line width=8pt, rounded corners=8pt, shorten <= -10pt] (aux4) -- ++(225:0.8) -- ++(-45:0.8);
        
        \begin{scope}[MainColor!70, line width=6pt, rounded corners=8pt]
            \draw[shorten <= -10pt] (aux2) -- ++(225:3) coordinate[pos=0.45] (c) -- ++(-45:3.1);
            \draw (aux2) -- (c) -- ++(135:2.5) -- ++(45:2.5) -- ++(-45:2.5) coordinate[pos=0.3] (d);   
            \draw (d) -- +(45:1);
        \end{scope}
    \end{tikzpicture}%
}


% Redefine chapter command to include decoration
\let\oldchapter\chapter
\renewcommand{\chapter}[1]{%
    \oldchapter{#1}%
    \chapterdecoration%
}


% Math display settings
\everymath{\displaystyle}


% Paragraph settings
\setlength{\parindent}{0em}
\renewcommand{\baselinestretch}{1.5}


% Prevent hyphenation and control widow/orphan penalties
\sloppy
\hyphenpenalty=10000
\clubpenalty=10000
\widowpenalty=10000
\displaywidowpenalty=10000
